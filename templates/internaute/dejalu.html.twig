{# non connecté et connecté #}

{# afficher le detail du livre concerné #}

{# enregistrer #}

{# lu #}

{# retour : vers la page ou on etait precedemment #}

{# lire : diriger vers la page de lecture #}

{# afficher la liste des commentaire sur le livres concerné en enpilant du plus recent au moin s recent en allant du haut vers le bas au format nom-commentatire #}

{# internaute ajoute un commentaire s'il est connecté        demande de connexion de l'interanute avant ajout commentaire s'il n'est pas connecté #}


{% extends 'base.html.twig' %}

{% block body %}

	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="page-content">

					{# <!-- ***** detail sur le livre Start ***** --> #}
					<div class="row">
						<div class="col-lg-12">
							<div class="main-profile ">
								{% if app.user is not null %}
									<div class="row">
										<div class="col-lg-4">
											<form>
												<div class="main-border-button">
													<div style="text-align: center;">
														{% if lu == false %} 
															<input type="hidden" name="lu" value="true">
															<button type="submit" style="color: #ec6090; background-color: transparent; border: 1px solid #ec6090; padding: 12px 30px; border-radius: 25px; cursor: pointer;">Marquer comme Lu ?</button>
														 {% else %}
															<input type="hidden" name="lu" value="false">
															<button type="submit" style="color: #fff; background-color: #e75e8d; padding: 12px 30px; border: none; border-radius: 25px; cursor: pointer;">Retirer comme Lu ?</button>
														{% endif %} 
													</div>
												</div>
											</form>
										</div>
										<div class="col-lg-4">
											<form>
												<div class="main-border-button">
													<div style="text-align: center;">
														{% if enr == false %} 
															<input type="hidden" name="enr" value="true">
															<button type="submit" style="color: #ec6090; background-color: transparent; border: 1px solid #ec6090; padding: 12px 30px; border-radius: 25px; cursor: pointer;">Marquer comme Enregistré ?</button>
														 {% else %}
															<input type="hidden" name="enr" value="false">
															<button type="submit" style="color: #fff; background-color: #e75e8d; padding: 12px 30px; border: none; border-radius: 25px; cursor: pointer;">Retirer comme Enregistré ?</button>
														{% endif %} 
													</div>
												</div>
											</form>
										</div>
										<div class="col-lg-4">
											<div class="main-border-button">
												<a href="{{ path('app_lecture', {livre:livre.getId}) }}">Lire</a> 
											</div>
										</div>
									</div>
								{% else %}
									<div class="row">
										<div class="col-lg-4">
											<div class="main-border-button">
												<a href="{{ path('app_login') }}">Marquer comme enregistré</a>
											</div>
										</div>
										<div class="col-lg-4">
											<div class="main-border-button">
												<a href="{{ path('app_login') }}">Marquer comme lu</a>
											</div>
										</div>
										<div class="col-lg-4">
											<div class="main-button">
												<a href="{{ path('app_login') }}">Lire</a> 
											</div>
										</div>
									</div>
								{% endif %}	

								<br>
								<div class="row">
									<div class="col-lg-6">
										<img src={{asset("images/"~livre.getImageCouverture())}} alt="" style="border-radius: 23px;">
									</div>
									<div class="col-lg-6 align-self-center">
										<ul>
											<li>Titre :
												<span>{{livre.getTitre()}}</span>
											</li>
											<li>Auteur :
												<span>{{livre.getAuteur()}}</span>
											</li>
											<li>Genre :
												<span>{{livre.getGenre()}}</span>
											</li>
											<li>Editeur :
												<span>{{livre.getEditeur()}}</span>
											</li>
											<li>Date publication :
												<span>{{livre.getDatePublication() | date("d/m/Y")}}</span>
											</li>
											{# <li>Nombre page <span>29</span></li>
											<li>Langue <span>29</span></li> #}
										</ul>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-12">
										<div class="clips">
											<div class="row">
												<div class="col-lg-12">
													<div class="heading-section">
														<h4>
															<em>Note</em>
															sur le livre</h4>
													</div>
												</div>
												<div class="col-lg-12 align-self-center">
													<div class="main-info header-text">
														{{ form_start(form1) }}
																{{ form_row(form1.notes, { 'attr': {'rows': '10', 'cols': '50', 'style': 'display: block; max-width: 1000px; width: 100%; font-size: 1.2em; padding: 10px; margin-bottom: 15px;'} })}}
															<br>
															<div class="main-border-button">
																<div style="text-align: center;">
																	{{ form_row(form1.enregistrer, { 'attr': {'style': 'background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 105px; cursor: pointer;'} })}}
																</div>
															</div>
														{{ form_end(form1) }}
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
					{# <!-- ***** detail sur le livre End ***** --> #}


					{# <!-- ***** Liste commentaire Start ***** --> #}
					<div class="gaming-library profile-library">
						<div class="col-lg-12">
							<div class="heading-section">
								<h4>
									<em>Commentaire</em>
									sur le livre</h4>
							</div>
							{% for commentU in comments %}
							<div class="item">
								<div class="main-info header-text">
								{% if commentU.getUtilisateur == utilisateur %}
									<div class="row">
										<h6>{{commentU.getUtilisateur().getNom()}}</h6><br>
										<div class="col-8">
											<p style="word-wrap: break-word;">{{commentU.getCommentaires()}}</p>
										</div>
										<div class="col-4">
											<div class="main-border-button">
												<a href="{{ path('app_supprimer_commentaire', {id: commentU.id}) }}">Supprimer</a>
											</div>
										</div>
									</div>
								{% else %}
									<h6>{{commentU.getUtilisateur().getNom()}}</h6><br>
									<p style="word-wrap: break-word;">{{commentU.getCommentaires()}}</p>
									
								{% endif %}
								</div>
							</div>
							{% endfor %}
						</div>
					</div>
					{# <!-- ***** Liste commentaire End ***** --> #}

					{# <!-- ***** Ajouter un commentaire start ***** --> #}
					<div class="most-popular">
						<div class="row">
							<div class="col-lg-12 align-self-center">
								<div class="main-info header-text">
									
									<h4>Ajouter un commentaire</h4>
									<br>
									{{ form_start(form) }}
										{{ form_row(form.commentaires, { 'attr': {'rows': '10', 'cols': '50', 'style': 'display: block; max-width: 1000px; width: 100%; font-size: 1.2em; padding: 10px; margin-bottom: 15px;'} })}}
									<br>
									<div class="main-border-button">
										<div style="text-align: center;">
											{{ form_row(form.commenter, { 'attr': {'style': 'background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 105px; cursor: pointer;'} })}}
										</div>
									</div>
									{{ form_end(form) }}
								</div>
							</div>
						</div>
					</div>
                    {# <!-- ***** Ajouter un commentaire start ***** --> #}
				</div>
			</div>
		</div>
	</div>

{% endblock %}
